-- Add missing recipe detail columns to recipes table

ALTER TABLE `recipes`
ADD COLUMN `preparation_text` TEXT NULL COMMENT 'Detailed brewing instructions' AFTER `description`,
ADD COLUMN `final_characteristics` TEXT NULL COMMENT 'Final potion appearance, smell, consistency' AFTER `preparation_text`;

-- Update existing recipes with preparation text and characteristics

-- Potion 1: Противоаллергическое зелье
UPDATE `recipes` SET
`preparation_text` = 'В серебряном котле вскипятить 250 г. воды. За это время лирный корень мелко натереть на терке, смешать в миске вместимостью не менее 300 мл, с сухими листьями крапивы, полыни и мяты. Когда вода вскипит, залить ею смесь и оставить на 3 часа. По истечении этого времени получившийся настой профильтровать и добавить 15 капель валерьянки.',
`final_characteristics` = 'Зеленого цвета, с резким запахом трав и мяты, жидкое.'
WHERE `potion_key` = 'potion1';

-- Potion 2: Эликсир бодрости
UPDATE `recipes` SET
`preparation_text` = 'Сначала в закипевшую воду высыпать порошок корней, томить на медленном огне, через полчаса добавить смолу, мешать 2 минуты по часовой стрелке и снова кипятить 30 минут. В светло-желтое зелье добавить листья клубники, помешать и через 5 минут положить траву мяты, зелье должно окраситься в светло-зеленый цвет и приобрести легкий трявяной запах. Варить все 10 минут, в конце прибавить огонь, высыпать пыльцу фей и тут же снять котелок с огня. Закрыть крышкой и настаивать два часа. После чего процедить и разлить по бутылкам из темного стекла. Хранить не более 2-х лет в прохладном месте.',
`final_characteristics` = 'Прозрачный, светлый с изумрудным отливом.'
WHERE `potion_key` = 'potion2';

-- Potion 3: Бодряще-лечащая настойка
UPDATE `recipes` SET
`preparation_text` = 'В ступе растереть ромашку, цветы гвоздики, перемешать оба ингредиента вместе. В емкость вылить 3 капли молока единорога, добавить 5 раздавленных ягод смородины, в емкость положить грецкий орех и розмарин, перемешать. Варить 30 минут. Хранить до года.',
`final_characteristics` = 'Прозрачное зелёно-перламутрового цвета, похожее на отвар из трав.'
WHERE `potion_key` = 'potion3';

-- Potion 4: Тонизирующее зелье
UPDATE `recipes` SET
`preparation_text` = 'В котел залить розовой воды и лимонного сока, дать настояться 5 минут, включить огонь и нагревать 15 минут, не доводя до кипения. Добавить корень червоточника, после этого помешивать 4 раза по часовой стрелке каждые 5 минут. Когда зелье станет розового цвета и будет пахнуть лимоном, добавить ягоды и прекратить помешивания. Через 10 минут добавить листья, помешивать беспрерывно: один раз против часовой стрелки, второй по часовой. Зелье должно стать синего цвета - снять котел с огня и, не закрывая крышкой, дать остыть. Разлить по 4 флаконам. Употреблять можно спустя день после варки. Хранить до полугода в темном месте.',
`final_characteristics` = 'Синего цвета, пахнущее лимоном и мятой зелье.'
WHERE `potion_key` = 'potion4';

-- Note: Add more recipes as needed following this pattern
